<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>üåø EcoPrompt ‚Äì Duurzaam AI-gebruik</title>
<style>
:root {
  --eco-groen: #3cb371;
  --eco-donker: #1b3022;
  --eco-licht: #f4faf7;
  --blauw: #2b6ef2;
  --eco-a: #4caf50;
  --eco-b: #8bc34a;
  --eco-c: #ffeb3b;
  --eco-d: #ffc107;
  --eco-e: #f44336;
  font-family: "Poppins", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
}
*{box-sizing:border-box}
body { margin:0; background:var(--eco-licht); color:#1b1b1b; transition:.3s }
header {
  background: linear-gradient(90deg, var(--eco-groen), var(--blauw));
  color:#fff; padding:1.2rem 2rem; display:flex; justify-content:space-between; align-items:center;
}
h1 { margin:0; font-size:1.8rem }
button { border:none; cursor:pointer; border-radius:1rem; padding:.6rem 1rem; font-weight:600; transition:.2s }
button:hover { transform: translateY(-1px) }
.mode-btn { background:#fff; color:#1b1b1b }
.eco-switch { background:#1b1b1b; color:#fff }
main { display:flex; flex-direction:column; align-items:center; padding:2rem; text-align:center }
textarea {
  width: min(650px, 90%); height:120px; padding:1rem; border-radius:.7rem;
  border:1px solid #cfd8d3; font-size:1rem; resize:none; background:#fff; transition:.2s
}
textarea:focus { outline:2px solid var(--eco-groen); border-color:transparent }
button#verstuur { background:var(--eco-groen); color:#fff; margin-top:1rem; font-size:1.05rem }
.resultaat {
  display:none; margin-top:2rem; background:#fff; padding:1.5rem; border-radius:1rem;
  box-shadow:0 6px 16px rgba(0,0,0,.1); width:min(650px, 90%); text-align:left; animation:fadeIn .5s ease
}
@keyframes fadeIn { from{opacity:0; transform:translateY(8px)} to{opacity:1; transform:translateY(0)} }
.section-title { margin:.2rem 0 .6rem; font-weight:700 }
.meter { height:12px; background:#e6ece8; border-radius:6px; overflow:hidden; margin:.6rem 0 1rem }
.meter-fill { height:100%; width:0; background:var(--eco-groen); transition:width 1.1s ease }
.badge { display:inline-block; padding:.35rem .75rem; border-radius:1rem; font-weight:700; color:#fff; letter-spacing:.02em }
.small { font-size:.9rem; color:#4b5a52 }
ul.compare { margin:.4rem 0 0 1rem; padding:0 }
ul.compare li { margin:.2rem 0 }
.note { font-size:.85rem; color:#5b6a62; margin-top:.4rem }
.dark { background:var(--eco-donker); color:#f4faf7 }
.dark .resultaat { background:#253a2f; color:#fff }
.dark textarea { background:#31493d; color:#fff; border-color:#3a5a4b }
footer{ text-align:center; padding:1.2rem; color:#66756c }
hr.soft { border:none; height:1px; background:#e6ece8; margin:1rem 0 }
.dark hr.soft{ background:#335244 }
.tag { display:inline-block; background:#eaf6ef; color:#1b3b2a; padding:.2rem .6rem; border-radius:.6rem; font-weight:600; margin-left:.5rem }
.dark .tag{ background:#335244; color:#eaf6ef }
</style>
</head>
<body>
<header>
  <h1>üåø EcoPrompt</h1>
  <div>
    <button id="ecoMode" class="eco-switch">Eco-modus</button>
    <button id="mode" class="mode-btn">Dark Mode</button>
  </div>
</header>

<main>
  <h2>Ontdek de impact van je AI-prompts</h2>
  <p class="small">Krijg een kort AI-antwoord met <span class="tag">energie</span>, <span class="tag">CO‚ÇÇ</span> en <span class="tag">EcoScore</span>.</p>

  <textarea id="prompt" placeholder="Bijv. Schrijf een korte samenvatting over klimaatverandering..."></textarea>
  <button id="verstuur">Verstuur</button>

  <div id="resultaat" class="resultaat">
    <div class="section-title">Resultaat</div>
    <div class="meter"><div class="meter-fill" id="meter"></div></div>

    <p><strong>AI Antwoord</strong></p>
    <p id="antwoord"></p>

    <hr class="soft" />

    <p><strong>Energieverbruik:</strong> <span id="energie"></span> Wh</p>
    <p><strong>CO‚ÇÇ-uitstoot:</strong> <span id="co2"></span> g</p>
    <p class="small"><em>Vergelijkingen (schattingen)</em></p>
    <ul id="vergelijkingen" class="compare"></ul>

    <hr class="soft" />

    <p><strong>EcoScore:</strong> <span id="ecoScore" class="badge"></span></p>
    <p id="tip" class="small"></p>

    <p id="gamestatus" class="small" style="margin-top:.6rem"></p>
  </div>
</main>

<footer>¬© 2025 Team EcoPrompt ‚Äî Duurzaam denken, slim prompten.</footer>

<script>
const apiBase = "https://ecoprompt.onrender.com"; // jouw backend
const promptInput = document.getElementById("prompt");
const knop = document.getElementById("verstuur");
const resDiv = document.getElementById("resultaat");
const antwoordEl = document.getElementById("antwoord");
const energieEl = document.getElementById("energie");
const co2El = document.getElementById("co2");
const ecoScoreEl = document.getElementById("ecoScore");
const tipEl = document.getElementById("tip");
const meter = document.getElementById("meter");
const vergelijkingenEl = document.getElementById("vergelijkingen");
const modeKnop = document.getElementById("mode");
const ecoModeKnop = document.getElementById("ecoMode");
const gamestatus = document.getElementById("gamestatus");
let dark=false, ecoMode=true, ecoPoints=0;

// UI toggles
modeKnop.onclick=()=>{dark=!dark;document.body.classList.toggle("dark",dark);modeKnop.textContent=dark?"Light Mode":"Dark Mode";}
ecoModeKnop.onclick=()=>{ecoMode=!ecoMode;ecoModeKnop.textContent=ecoMode?"Eco-modus":"Power-modus ‚ö°";ecoModeKnop.style.background=ecoMode?"#1b1b1b":"#ff9800"}

// helpers
const kleur = s=>({A:"#4caf50",B:"#8bc34a",C:"#ffeb3b",D:"#ffc107",E:"#f44336"}[s]);
const tipVoor = s=>({
  A:"Uitstekend! üå± Je werkt supergroen.",
  B:"Mooi werk! Misschien kan het nog iets korter.",
  C:"Goed bezig ‚Äì probeer je prompt wat compacter te maken.",
  D:"Je prompt is lang; korter = minder energie.",
  E:"Maak het flink korter üí° ‚Äì dat scheelt veel energie."
}[s]);

function humanTime(sec){
  if (sec<60) return `${Math.round(sec)} sec`;
  const m = Math.floor(sec/60), s = Math.round(sec%60);
  return s?`${m} min ${s} sec`:`${m} min`;
}

// Vergelijkingen op basis van energie (Wh) en CO2 (g)
function buildComparisons(wh, g){
  // aannames (grove schattingen):
  const laptopChargerW = 60;         // 60W oplader
  const ledW = 9;                    // 9W LED-lamp
  const phoneFullWh = 12;            // ~12Wh volle smartphone-lading
  const searchCO2g = 0.2;            // ~0,2 g CO2 per zoekopdracht

  const laptopSeconds = wh / laptopChargerW * 3600;      // tijd bij 60W
  const ledMinutes = wh / ledW * 60;                     // minuten 9W lamp
  const phonePct = Math.min(wh / phoneFullWh * 100, 999);// %
  const searches = g / searchCO2g;                       // aantal zoekopdrachten

  return [
    `‚âà ${humanTime(laptopSeconds)} <strong>laptop opladen</strong> (60 W)`,
    `‚âà ${Math.round(ledMinutes)} min een <strong>9 W LED-lamp</strong> laten branden`,
    `‚âà ${phonePct.toFixed(1)}% van een <strong>smartphone-lading</strong> (~12 Wh)`,
    `‚âà ${Math.max(1, Math.round(searches))} <strong>Google-zoekopdrachten</strong> (¬±0,2 g CO‚ÇÇ/stuk)`
  ];
}

function updateGamification(scoreLetter){
  const punten = {A:5,B:4,C:3,D:2,E:1}[scoreLetter] || 0;
  ecoPoints += punten;
  gamestatus.innerHTML = `üèÖ EcoPoints: <strong>${ecoPoints}</strong> (+${punten})`;
}

knop.onclick = async () => {
  const prompt = promptInput.value.trim();
  if (!prompt) return alert("Voer een prompt in.");

  // animaties en start
  antwoordEl.textContent = "Even geduld...";
  resDiv.style.display = "block";
  meter.style.width = "0%";

  try{
    const res = await fetch(`${apiBase}/api/prompt`,{
      method:"POST",
      headers:{"Content-Type":"application/json"},
      body:JSON.stringify({ prompt })
    });
    const data = await res.json();
    if (data.error){ antwoordEl.textContent = data.error; return; }

    // promptmeter op basis van promptlengte
    meter.style.width = Math.min(prompt.length/3, 100) + "%";

    // vul hoofdresultaten
    antwoordEl.textContent = data.antwoord;
    energieEl.textContent = data.energie;
    co2El.textContent = data.co2;

    // vergelijkingen
    vergelijkingenEl.innerHTML = "";
    const comps = buildComparisons(parseFloat(data.energie), parseFloat(data.co2));
    comps.forEach(c=>{
      const li=document.createElement("li"); li.innerHTML=c; vergelijkingenEl.appendChild(li);
    });

    // EcoScore + tips + punten
    ecoScoreEl.textContent = data.ecoScore;
    ecoScoreEl.style.backgroundColor = kleur(data.ecoScore);
    tipEl.textContent = tipVoor(data.ecoScore);
    updateGamification(data.ecoScore);
  }catch(e){
    antwoordEl.textContent = "Fout bij ophalen van resultaat.";
  }
};
</script>
</body>
</html>
